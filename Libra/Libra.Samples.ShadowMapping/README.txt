Xbox LIVE Indie Games で公開されているサンプル コードより移植。

Shadow Mapping
http://xbox.create.msdn.com/en-US/education/catalog/sample/shadow_mapping_1

処理の詳細を知りたい場合には、オリジナルのサンプル コードを参照の事。